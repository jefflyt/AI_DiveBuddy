# Step 3.1.1: Create Open Water Content Structure

**Part of:** PR 3.1 - OW/AOW Original Content Creation  
**Focus:** Set up folder structure and content schema for Open Water education  
**File to Create:** `data/education/open-water/` directory structure  
**Estimated Time:** 10 minutes

## Overview

Establishes the foundational folder structure and TypeScript schema for organizing Open Water diving education content. This structure will hold 15-20 markdown files covering core OW certification topics.

## Pre-Substep Checklist

- [ ] **Branch:** Working on `3.1-ow-aow-content` (from plan.md)
- [ ] **Codebase State:** Phase 2 completed (AI agents integrated)
- [ ] **Project builds:** `npm run dev` runs without errors

## Implementation

### Goal

Create organized folder structure for OW content with TypeScript schema definitions for type safety.

### Step-by-Step Instructions

#### Step 1: Create Folder Structure

- [ ] Create the education content directory structure:

```bash
mkdir -p data/education/open-water
mkdir -p data/education/advanced-open-water
mkdir -p data/education/schemas
```

#### Step 2: Create Content Schema

- [ ] Create `data/education/schemas/content-schema.ts`:

```typescript
/**
 * Education content schema for type-safe content creation
 */

export interface EducationTopic {
  id: string
  certification: 'OW' | 'AOW'
  module: number
  title: string
  subtitle?: string
  content: string
  keyTerms: KeyTerm[]
  objectives: string[]
  prerequisites?: string[]
  estimatedReadTime: number // minutes
  difficulty: 'beginner' | 'intermediate' | 'advanced'
  relatedTopics?: string[] // IDs of related topics
  quizQuestions?: QuizQuestion[]
  metadata: TopicMetadata
}

export interface KeyTerm {
  term: string
  definition: string
  example?: string
}

export interface QuizQuestion {
  id: string
  question: string
  options: string[]
  correctAnswer: number // index of correct option
  explanation: string
}

export interface TopicMetadata {
  author?: string
  lastUpdated: string // ISO date
  version: string
  tags: string[]
  category: string
  certificationBody?: 'PADI' | 'SSI' | 'NAUI' | 'Original'
}

/**
 * Open Water curriculum structure
 */
export const OW_CURRICULUM = {
  module1: {
    title: 'Introduction to Scuba Diving',
    topics: ['equipment-overview', 'physics-basics', 'safety-fundamentals']
  },
  module2: {
    title: 'Equipment and How It Works',
    topics: ['bcd', 'regulator', 'mask-fins-snorkel', 'gauges-computer']
  },
  module3: {
    title: 'Buoyancy Control and Skills',
    topics: ['buoyancy-fundamentals', 'weighting', 'breathing-techniques', 'fin-techniques']
  },
  module4: {
    title: 'Dive Planning and Environment',
    topics: ['dive-planning', 'buddy-system', 'marine-environment', 'conservation']
  },
  module5: {
    title: 'Safety and Problem Management',
    topics: ['emergency-procedures', 'ascent-safety', 'decompression-sickness', 'first-aid']
  }
} as const

/**
 * Helper function to validate content structure
 */
export function validateEducationTopic(topic: EducationTopic): boolean {
  if (!topic.id || !topic.title || !topic.content) {
    return false
  }
  if (topic.certification !== 'OW' && topic.certification !== 'AOW') {
    return false
  }
  if (topic.module < 1 || topic.module > 5) {
    return false
  }
  return true
}

/**
 * Content formatter for database insertion
 */
export function formatForDatabase(topic: EducationTopic) {
  return {
    title: topic.title,
    content: topic.content,
    category: 'education',
    subcategory: topic.certification,
    metadata: {
      module: topic.module,
      keyTerms: topic.keyTerms,
      objectives: topic.objectives,
      difficulty: topic.difficulty,
      estimatedReadTime: topic.estimatedReadTime,
      ...topic.metadata
    }
  }
}
```

#### Step 3: Create Content Template

- [ ] Create `data/education/open-water/_TEMPLATE.md`:

```markdown
---
id: ow-{module}-{topic-slug}
certification: OW
module: {1-5}
title: {Topic Title}
subtitle: {Optional Subtitle}
difficulty: beginner
estimatedReadTime: {5-15}
tags: [diving, open-water, {specific-tags}]
version: 1.0.0
lastUpdated: 2025-11-26
---

# {Topic Title}

{Engaging introduction paragraph explaining why this topic matters for new divers}

## Learning Objectives

By the end of this topic, you will:
- {Objective 1}
- {Objective 2}
- {Objective 3}

## Key Terms

**{Term 1}**: {Definition}  
*Example:* {Real-world example}

**{Term 2}**: {Definition}  
*Example:* {Real-world example}

## Main Content

### {Section 1}

{Detailed explanation with examples}

{Use bullet points for lists:}
- Point 1
- Point 2
- Point 3

### {Section 2}

{Continue with logical flow}

{Include practical tips:}
> **Pro Tip:** {Helpful advice for new divers}

### {Section 3}

{Build on previous sections}

## Common Mistakes

1. **{Mistake 1}**: {Why it happens} → **Solution:** {How to avoid}
2. **{Mistake 2}**: {Why it happens} → **Solution:** {How to avoid}

## Practice Tips

- {Practical exercise 1}
- {Practical exercise 2}
- {Practical exercise 3}

## Safety Considerations

⚠️ **Important:**
- {Critical safety point 1}
- {Critical safety point 2}

## Summary

{2-3 sentence recap of key takeaways}

## Related Topics

- [{Related Topic 1}](./related-topic-1.md)
- [{Related Topic 2}](./related-topic-2.md)

## Quiz Questions

1. **{Question 1}**
   - A) {Option A}
   - B) {Option B}
   - C) {Option C}
   - D) {Option D}
   
   *Answer: {Letter}) {Explanation}*

2. **{Question 2}**
   {Same format}

---

*This content is original educational material created for DiveBuddy. Always consult with a certified instructor before diving.*
```

#### Step 4: Create Index File

- [ ] Create `data/education/open-water/index.ts`:

```typescript
import { EducationTopic } from '../schemas/content-schema'

/**
 * Open Water topic index
 * Import and export all OW topics for easy access
 */

// Module 1: Introduction to Scuba Diving
export { default as equipmentOverview } from './equipment-overview.md'
export { default as physicsBasics } from './physics-basics.md'
export { default as safetyFundamentals } from './safety-fundamentals.md'

// Module 2: Equipment and How It Works
export { default as bcd } from './bcd.md'
export { default as regulator } from './regulator.md'
export { default as maskFinsSnorkel } from './mask-fins-snorkel.md'
export { default as gaugesComputer } from './gauges-computer.md'

// Module 3: Buoyancy Control and Skills
export { default as buoyancyFundamentals } from './buoyancy-fundamentals.md'
export { default as weighting } from './weighting.md'
export { default as breathingTechniques } from './breathing-techniques.md'
export { default as finTechniques } from './fin-techniques.md'

// Module 4: Dive Planning and Environment
export { default as divePlanning } from './dive-planning.md'
export { default as buddySystem } from './buddy-system.md'
export { default as marineEnvironment } from './marine-environment.md'
export { default as conservation } from './conservation.md'

// Module 5: Safety and Problem Management
export { default as emergencyProcedures } from './emergency-procedures.md'
export { default as ascentSafety } from './ascent-safety.md'
export { default as decompressionSickness } from './decompression-sickness.md'
export { default as firstAid } from './first-aid.md'

/**
 * Get all OW topics organized by module
 */
export function getOWTopicsByModule(module: number): EducationTopic[] {
  // Implementation will load topics dynamically
  return []
}

/**
 * Get topic by ID
 */
export function getOWTopic(id: string): EducationTopic | null {
  // Implementation will fetch specific topic
  return null
}
```

## Verification Checklist

- [ ] Folder structure created: `data/education/open-water/`
- [ ] Schema file created: `data/education/schemas/content-schema.ts`
- [ ] Template file created: `data/education/open-water/_TEMPLATE.md`
- [ ] Index file created: `data/education/open-water/index.ts`
- [ ] No TypeScript errors: Run `npm run build`
- [ ] Files follow project naming conventions (kebab-case)

## Troubleshooting

| Issue | Solution |
|-------|----------|
| TypeScript errors on schema | Ensure all interfaces are exported; check for circular imports |
| Cannot create directories | Run `mkdir` commands with `-p` flag for parent directory creation |
| Template not rendering | Verify frontmatter YAML syntax (three dashes, proper indentation) |
| Module resolution errors | Check `tsconfig.json` paths are configured for `@/data/*` alias |

## Files Modified

- [ ] ✅ Created: `data/education/schemas/content-schema.ts`
- [ ] ✅ Created: `data/education/open-water/_TEMPLATE.md`
- [ ] ✅ Created: `data/education/open-water/index.ts`
- [ ] ✅ Created: Folder structure for education content

## What Comes Next

**Next substep:** Step 3.1.2 - Write Module 1 Content (Introduction to Scuba Diving)

This will create the first set of actual educational content files using the template and schema you just created.
